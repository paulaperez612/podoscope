(this["webpackJsonppodoscope-ui"]=this["webpackJsonppodoscope-ui"]||[]).push([[0],{106:function(e,t,a){e.exports=a(148)},111:function(e,t,a){},112:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(14),r=a.n(o),s=(a(111),a(10)),c=a(8),A=a(12),l=a(6),u=a(13),h=(a(112),a(186)),g=a(211),m=a(212),d=a(57),f=a(180),p=a(75),E=a.n(p),v="https://podosys.piesalud.com";function y(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e;if(n){var o=localStorage.getItem("sid");i="".concat(e,"&sid=").concat(o)}fetch(i,{method:"GET"}).then((function(e){return e.ok||(console.log("ERROR could not make get request."),a()),e.json()})).then((function(e){"La sesion es invalida , por favor verificar credenciales"===e.rta?a({type:"session_expired",error:e.rta}):t(e)})).catch((function(e){a({type:"fetch",error:e})}))}function I(e,t,a,n,i){var o,r,s,c=function(e){return{imgFormat:{sid:localStorage.getItem("sid"),id:"",angulo_i:e.imgData.extra.leftAngle||null,angulo_d:e.imgData.extra.rightAngle||null,u_x_d:e.imgData.data.right.lineX||null,u_x_i:e.imgData.data.left.lineX||null,x_i:e.imgData.data.left.point?e.imgData.data.left.point.x:null,x_d:e.imgData.data.right.point?e.imgData.data.right.point.x:null,y_i:e.imgData.data.left.point?e.imgData.data.left.point.y:null,y_d:e.imgData.data.right.point?e.imgData.data.right.point.y:null,efp_id:e.user.eid,traza:JSON.stringify(e.imgData.data.free.path),imagen:e.imgData.image+"@"+e.imId},examFormat:{entryPoint:"save_efp",sid:localStorage.getItem("sid"),thi:e.feet.left.footprintType,thd:e.feet.right.footprintType,tpi:e.feet.left.footType,tpd:e.feet.right.footType,tti:e.feet.left.heelType,ttd:e.feet.right.heelType,obs:e.observations.defaultValue,tp:e.shoeSize,pid:e.user.pid,id:e.user.eid}}}(e);console.log("saving exam..."),C(v+"/index.php",c.examFormat,(function(e){console.log("Sucessfully updated exam"),console.log(e),t(e)}),(function(e){a(e)})),console.log("saving image..."),o=c.imgFormat,r=function(e){n(e)},s=function(e){i(e)},console.log("sending body to save image: ",JSON.stringify(o)),fetch("https://podosys.piesalud.com/index.php?entryPoint=save_img",{method:"POST",body:JSON.stringify(o)}).then((function(e){return console.log("create image response:"),console.log(e),e.text()})).then((function(e){"La sesion es invalida , por favor verificar credenciales"===e.rta?s({type:"session_expired",error:e.rta}):(console.log("Succesfully saved image: "),console.log(e),r(e))})).catch((function(e){s({type:"fetch",error:e})}))}function C(e,t,a,n){var i=e+"?",o=!0;for(var r in t)o||(i+="&"),i+=r+"="+t[r],o=!1;fetch(i,{method:"POST"}).then((function(e){return e.text()})).then((function(e){"La sesion es invalida , por favor verificar credenciales"===e.rta?n({type:"session_expired",error:e.rta}):a(e)})).catch((function(e){n({type:"fetch",error:e})}))}var b=a(76),B=a.n(b);function k(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var Q=function(e){function t(e){var a;Object(s.a)(this,t),(a=k(this,t,[e])).state={username:"",password:"",failed:!1},a.verifyAuth=a.verifyAuth.bind(a);var n=localStorage.getItem("sid");return n&&"undefined"!==n&&a.props.authTrue(!0),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"serializeObject",value:function(e){var t=[];return Object.entries(e).forEach((function(a){Object.prototype.hasOwnProperty.call(e,a[0])&&("object"===typeof a[1]?t.push(a[0]+"="+JSON.stringify(a[1])):t.push(a[0]+"="+a[1]))})),t.join("&")}},{key:"verifyAuth",value:function(){var e=this,t={method:"login",input_type:"JSON",response_type:"JSON",rest_data:{user_auth:{user_name:this.state.username,password:E.a.MD5(this.state.password).toString()},application_name:"",name_value_list:[{name:"notifyonsave",value:"true"}]}};y("".concat("https://podosys.piesalud.com/service/v2/rest.php","?").concat(this.serializeObject(t)),(function(t){t.id?(localStorage.setItem("sid",t.id),e.props.authTrue(!0)):e.setState({failed:!0})}),(function(){e.setState({username:"",password:"",failed:!0})}),!1)}},{key:"onEnter",value:function(e){"Enter"===e.key&&this.verifyAuth()}},{key:"render",value:function(){var e=this;return i.a.createElement(f.a,{component:"main",maxWidth:"xs"},i.a.createElement(g.a,null),i.a.createElement("div",null,i.a.createElement("img",{src:B.a,alt:"logo piesalud",height:"150px"}),i.a.createElement(d.a,{component:"h1",variant:"h5",align:"center"},"Sign in"),i.a.createElement(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"User name",name:"username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})},onKeyDown:this.onEnter.bind(this),autoFocus:!0}),i.a.createElement(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},onKeyDown:this.onEnter.bind(this)}),i.a.createElement(h.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:this.verifyAuth},"Sign In"),i.a.createElement("br",null),i.a.createElement("br",null),this.state.failed?i.a.createElement(d.a,{color:"error",align:"center"},"Incorrect username or password, please try again"):i.a.createElement("br",null)),i.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Icons made by Freepik from https://www.flaticon.com"))}}])}(n.Component),O=a(187),S=(a(140),a(209)),x=a(200),R=a(151),w=a(195),j=a(55),N=a.n(j),T=a(90),D=a.n(T),J=a(78),P=a.n(J),_=a(188),U=a(189),M=a(190),z=a(191),F=a(192),L=a(193),V=a(53);function X(){return(X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}var W=i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{d:"M18.626,50.494c-2.461,0-4.859,0.253-7.206,0.652c-0.163,4.019-0.183,9.874,1.743,12.148 c2.712,3.203,8.699,3.203,11.106-0.444c2.387-3.62,0.804-8.826,0.136-11.924C22.508,50.674,20.591,50.494,18.626,50.494z"}),i.a.createElement("path",{d:"M20.182,14.017C13.978,14.236,7.7,28.76,9.378,36.207c0.604,2.669,2.191,8.176,2.191,11.388 c0,0.39-0.03,0.999-0.065,1.735c2.327-0.374,4.694-0.622,7.124-0.622c1.858,0,3.68,0.15,5.478,0.369 c-0.178-1.738-0.229-4.428,0.386-7.179c0.829-3.721,2.569-7.591,3.284-9.562C29.233,28.324,26.386,13.797,20.182,14.017z"}),i.a.createElement("path",{d:"M47.016,37.062c-2.01,0-3.972,0.188-5.906,0.452c-0.718,3.144-1.971,7.934,0.263,11.32 c2.406,3.647,8.395,3.647,11.106,0.445c1.832-2.165,1.902-7.582,1.766-11.565C51.891,37.318,49.484,37.062,47.016,37.062z"}),i.a.createElement("path",{d:"M45.46,0.002c-6.205-0.22-9.052,14.307-7.592,18.321c0.717,1.969,2.455,5.842,3.283,9.563 c0.687,3.076,0.545,6.098,0.319,7.77c1.82-0.226,3.661-0.381,5.545-0.381c2.44,0,4.815,0.249,7.151,0.628 c-0.048-1.009-0.094-1.832-0.094-2.324c0-3.212,1.588-8.719,2.192-11.388C57.942,14.748,51.663,0.221,45.46,0.002z"}))),H=i.a.createElement("g",null),K=i.a.createElement("g",null),q=i.a.createElement("g",null),Y=i.a.createElement("g",null),G=i.a.createElement("g",null),Z=i.a.createElement("g",null),$=i.a.createElement("g",null),ee=i.a.createElement("g",null),te=i.a.createElement("g",null),ae=i.a.createElement("g",null),ne=i.a.createElement("g",null),ie=i.a.createElement("g",null),oe=i.a.createElement("g",null),re=i.a.createElement("g",null),se=i.a.createElement("g",null);const ce=e=>{let{svgRef:t,title:a,...n}=e;return i.a.createElement("svg",X({id:"Capa_1",x:"0px",y:"0px",width:"65.644px",height:"65.645px",viewBox:"0 0 65.644 65.645",style:{enableBackground:"new 0 0 65.644 65.645"},xmlSpace:"preserve",ref:t},n),a?i.a.createElement("title",null,a):null,W,H,K,q,Y,G,Z,$,ee,te,ae,ne,ie,oe,re,se)},Ae=i.a.forwardRef((e,t)=>i.a.createElement(ce,X({svgRef:t},e)));a.p;function le(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}function ue(e){return i.a.createElement(V.a,Object.assign({},e,{viewBox:"0 0 65 65",style:{fontSize:20}}),i.a.createElement(Ae,null))}var he=function(e){function t(){return Object(s.a)(this,t),le(this,t,arguments)}return Object(u.a)(t,e),Object(c.a)(t,[{key:"renderDataItem",value:function(e,t,a){return i.a.createElement(O.a,{item:!0,xs:6,sm:4,className:"data-item"},a,i.a.createElement(d.a,{variant:"body2",className:"data-text"},i.a.createElement("strong",null,e,":")," ",t))}},{key:"render",value:function(){var e=this;return i.a.createElement(_.a,{className:"user-card"},i.a.createElement(U.a,null,i.a.createElement(d.a,{variant:"h6",className:"user-name"},this.props.user.name),i.a.createElement(O.a,{container:!0,spacing:2,className:"user-data-container",style:{marginLeft:"-20px"}},i.a.createElement(O.a,{item:!0,xs:4,className:"data-item"},i.a.createElement(M.a,{className:"icon"}),i.a.createElement(d.a,{variant:"body2",className:"data-text"},i.a.createElement("strong",null,"Tel\xe9fono:")," ",this.props.user.cellphone)),i.a.createElement(O.a,{item:!0,xs:4,className:"data-item"},i.a.createElement(d.a,{variant:"body2",className:"data-text"},i.a.createElement("strong",null,"C\xe9dula:")," CC ",this.props.user.cedula)),i.a.createElement(O.a,{item:!0,xs:4,className:"data-item"},i.a.createElement(z.a,{className:"icon"}),i.a.createElement(d.a,{variant:"body2",className:"data-text"},i.a.createElement("strong",null,"Email:")," ",this.props.user.email)),i.a.createElement(O.a,{item:!0,xs:4,className:"data-item"},i.a.createElement(F.a,{className:"icon"}),i.a.createElement(d.a,{variant:"body2",className:"data-text"},i.a.createElement("strong",null,"Nacimiento:")," ",this.props.user.dob)),i.a.createElement(O.a,{item:!0,xs:4,className:"data-item"},i.a.createElement(L.a,{className:"icon"}),i.a.createElement(d.a,{variant:"body2",className:"data-text"},i.a.createElement("strong",null,"Sexo:")," ",this.props.user.sex)),i.a.createElement(O.a,{item:!0,xs:4,className:"data-item"},i.a.createElement(ue,{className:"icon"}),i.a.createElement(d.a,{variant:"body2",className:"data-text"},i.a.createElement("strong",null,"Talla:")),i.a.createElement(m.a,{value:this.props.shoeSize,onChange:function(t){return e.props.setShoeSize(parseInt(t.target.value))},type:"number",size:"small",className:"size-input"})))))}}])}(n.Component),ge=(a(141),a(194)),me=a(64),de=a.n(me);function fe(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=fe(this,t,[e])).handleClick=function(){console.log("Presionaste el recuadro con ID: ".concat(a.props.cardId)),a.props.changeSelect(a.props.cardId)},a.state={image:de.a},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"updateImage",value:function(e){this.setState({image:e})}},{key:"setImageToDefaultImage",value:function(){console.log("Inside the image ref itself"),this.setState({image:de.a})}},{key:"render",value:function(){var e=this.props.cardId===this.props.selection;return i.a.createElement(_.a,{style:{width:"150px",backgroundColor:"  #1f4e7c",border:e?"3px solid white":"3px solid transparent",cursor:"pointer"},className:e?"selected":"",onClick:this.handleClick},i.a.createElement(ge.a,{style:{height:100,backgroundColor:"  #1f4e7c"},image:this.state.image||""}))}}])}(n.Component);function Ee(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var ve=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Ee(this,t,[e])).state={selection:-1},a.changeSelection=a.changeSelection.bind(a),a.imgsRefs=[i.a.createRef(),i.a.createRef(),i.a.createRef(),i.a.createRef(),i.a.createRef(),i.a.createRef()],a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"changeSelection",value:function(e){var t=this;this.setState({selection:e},(function(){t.props.selectImage(e)}))}},{key:"updateImage",value:function(e,t){this.imgsRefs[e].updateImage(t)}},{key:"setImageToDefault",value:function(e){console.log("In selection ref, setting image ".concat(e," to default.")),this.imgsRefs[e].setImageToDefaultImage()}},{key:"makeCardWithCaption",value:function(e,t){var a=this;return i.a.createElement(O.a,{item:!0,key:"card-".concat(e)},i.a.createElement(O.a,{container:!0,direction:"column",alignItems:"center",spacing:1},i.a.createElement(O.a,{item:!0},i.a.createElement(pe,{ref:function(t){return a.imgsRefs[e]=t},changeSelect:this.changeSelection,cardId:e,selection:this.state.selection,cardCaption:t})),i.a.createElement(O.a,{item:!0},i.a.createElement(d.a,{variant:"body2",align:"center"},t))))}},{key:"render",value:function(){return i.a.createElement("div",{style:{display:"flex",justifyContent:"center",gap:"1010px",marginTop:"-102px",transform:"translateX(333px)"}},i.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},i.a.createElement(d.a,{variant:"subtitle1"},"Back"),i.a.createElement(O.a,{container:!0,direction:"column",alignItems:"center",style:{gap:"60px"}},this.makeCardWithCaption(0,"Standing Up"),this.makeCardWithCaption(1,"45 \xb0"),this.makeCardWithCaption(2,"Toes up"))),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},i.a.createElement(d.a,{variant:"subtitle1"},"Front"),i.a.createElement(O.a,{container:!0,direction:"column",alignItems:"center",style:{gap:"60px"}},this.makeCardWithCaption(3,"Chaplin"),this.makeCardWithCaption(4,"Chaplin Toes Up"),this.makeCardWithCaption(5,"With Insoles"))))}}])}(n.Component),ye=a(207),Ie=a(210);function Ce(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var be=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Ce(this,t,[e])).state={leftAngle:void 0,rightAngle:void 0,action:!1},a.setAction=a.setAction.bind(a),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"update",value:function(e,t){0===e?this.setState({leftAngle:t}):this.setState({rightAngle:t})}},{key:"getState",value:function(){var e={};return e.leftAngle=this.state.leftAngle,e.rightAngle=this.state.rightAngle,e}},{key:"updateState",value:function(e){this.setState({leftAngle:e&&(e.leftAngle||e.left&&e.left.angle),rightAngle:e&&(e.rightAngle||e.right&&e.right.angle),action:!1})}},{key:"setAction",value:function(e){this.props.onSideChange(e.target.checked),this.setState({action:e.target.checked})}},{key:"resetInfo",value:function(){this.setState({leftAngle:void 0,rightAngle:void 0,action:!1})}},{key:"colorValidationAngle",value:function(e){return this.props.threshold.value-e<0?"error":"inherit"}},{key:"render",value:function(){return i.a.createElement(O.a,{container:!0,className:"switch-container",alignItems:"center",justify:"center"},i.a.createElement(O.a,{item:!0,xs:4},i.a.createElement(d.a,{color:this.colorValidationAngle(this.state.leftAngle),align:"center"},this.state.leftAngle||"-","\xb0"),i.a.createElement(d.a,{align:"center",variant:"h5",component:"h3"},"Left")),i.a.createElement(O.a,{item:!0},i.a.createElement(Ie.a,{color:"primary",onChange:this.setAction,checked:this.state.action})),i.a.createElement(O.a,{item:!0,xs:4},i.a.createElement(d.a,{color:this.colorValidationAngle(this.state.rightAngle),align:"center"},this.state.rightAngle||"-","\xb0"),i.a.createElement(d.a,{align:"center",variant:"h5",component:"h3"},"Right")))}}])}(i.a.Component),Be=a(81),ke=a.n(Be),Qe=a(82),Oe=a.n(Qe),Se=a(80),xe=a.n(Se),Re=a(79),we=a.n(Re);function je(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var Ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=je(this,t,[e])).state={action:0},a.setAction=a.setAction.bind(a),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"setAction",value:function(e){var t=this;return function(){t.setState((function(t){return{action:t.action===e?0:e}}),(function(){t.props.setAction(e),4===e&&t.setState({action:0})}))}}},{key:"makeButton",value:function(e,t,a){return i.a.createElement(O.a,{item:!0,xs:3},i.a.createElement(w.a,{variant:"extended",color:this.state.action===e?"secondary":"primary","aria-label":a,className:"cam-btn",onClick:this.setAction(e)},t))}},{key:"render",value:function(){return i.a.createElement(O.a,{className:"cam-btn-container"},this.makeButton(1,i.a.createElement(we.a,null),"Draw line"),this.makeButton(2,i.a.createElement(xe.a,null),"Draw point"),this.makeButton(3,i.a.createElement(ke.a,null),"Draw"),this.makeButton(4,i.a.createElement(Oe.a,null),"Undo draw"))}}])}(i.a.Component),Te=a(83),De=a.n(Te),Je=a(84),Pe=a.n(Je),_e=a(85),Ue=a.n(_e);a(143);function Me(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var ze=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Me(this,t,[e])).state={photo:void 0},a.reset=a.reset.bind(a),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"updateButtons",value:function(e){this.setState({hasPhoto:e})}},{key:"click",value:function(e){var t=this;return function(){e?t.props.takePicture():t.props.cancelPicture(),t.setState({photo:e})}}},{key:"reset",value:function(e){this.setState({photo:e})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.photo?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.a,{className:"Botonesimg",color:"secondary","aria-label":"cancel",onClick:this.click(!1)},i.a.createElement(Pe.a,null)),i.a.createElement(w.a,{className:"Botonesimg",color:"secondary","aria-label":"save",onClick:this.props.savePicture,disabled:"-"===this.props.patientCedula},i.a.createElement(Ue.a,null))):i.a.createElement(w.a,{className:"Botonesimg",color:"primary","aria-label":"take picture",onClick:this.click(!0)},i.a.createElement(De.a,null)))}}])}(i.a.Component);a(144);function Fe(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var Le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Fe(this,t,[e])).canvasRef=i.a.createRef(),a.videoRef=i.a.createRef(),a.imgRef=i.a.createRef(),a.infoRef=i.a.createRef(),a.downRef=i.a.createRef(),a.setAction=a.setAction.bind(a),a.mouseDownUpHandler=a.mouseDownUpHandler.bind(a),a.takePicture=a.takePicture.bind(a),a.cancelPicture=a.cancelPicture.bind(a),a.savePicture=a.savePicture.bind(a),a.updateDimension=a.updateDimension.bind(a),a.action=0,a.rect=void 0,a.data=a.getDefaultData(),a.side=a.data.left,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.rect=this.canvasRef.getBoundingClientRect(),this.videoRef.width=this.rect.width,this.rect=this.videoRef.getBoundingClientRect(),this.ctx=this.canvasRef.getContext("2d");console.log(this),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(t){return e.setTheVideoStuff(t)})).catch((function(e){console.log("An error ocurred: "+e.name+": "+e.message)}))}},{key:"setTheVideoStuff",value:function(e){var t=this;this.videoRef.srcObject=e,console.log("ref set."),setTimeout((function(){t.videoRef.play(),t.updateDimension(),window.addEventListener("resize",t.updateDimension)}),500)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimension)}},{key:"getDefaultData",value:function(){return{left:{lineX:void 0,point:void 0},right:{lineX:void 0,point:void 0},free:{down:!1,path:[[]]},extra:{left:{angle:void 0},right:{angle:void 0}}}}},{key:"updateDimension",value:function(){this.rect=this.videoRef.getBoundingClientRect(),this.canvasRef.height=this.rect.height,this.canvasRef.width=this.rect.width,this.imgRef.height=this.rect.height,this.imgRef.width=this.rect.width,this.drawState()}},{key:"setImg",value:function(e){e.image?(this.imgRef.classList.remove("hidden"),this.imgRef.src=e.image):(this.imgRef.removeAttribute("src"),this.imgRef.classList.add("hidden")),this.data=e.data||this.getDefaultData(),this.downRef.reset(!!e.image),this.side=this.data.left,this.infoRef.updateState(e.extra),this.drawState()}},{key:"drawState",value:function(){var e=this,t=function(t){t.lineX&&e.drawLine(t.lineX,!1,t.point),t.point&&e.drawPoint(t.point.x,t.point.y,!1,t.line)};this.ctx.clearRect(0,0,this.rect.width+20,this.rect.height+20),this.drawPath(),t(this.data.left),t(this.data.right)}},{key:"sketchLine",value:function(e,t,a,n){this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(a,n),this.ctx.stroke()}},{key:"drawLine",value:function(e,t,a){this.ctx.strokeStyle=t?"red":"cyan",t?this.ctx.setLineDash([5,3]):this.ctx.setLineDash([1,0]),this.sketchLine(e,0,e,this.rect.height+20),a&&(t&&this.ctx.setLineDash([5,3]),this.sketchLine(a.x,a.y,e,0),this.sketchLine(a.x,a.y,e,this.canvasRef.height))}},{key:"drawPoint",value:function(e,t,a,n){this.ctx.strokeStyle=a?"red":"cyan",this.ctx.fillStyle=a?"yellow":"cyan",this.ctx.beginPath(),this.ctx.arc(e,t,5,0,2*Math.PI),this.ctx.fill(),n&&(a&&this.ctx.setLineDash([5,3]),this.sketchLine(e,t,n,0),this.sketchLine(e,t,n,this.canvasRef.height))}},{key:"freePaint",value:function(e,t){this.data.free.down&&(this.ctx.strokeStyle="blue",this.sketchLine(this.data.free.path[this.data.free.path.length-1].x,this.data.free.path[this.data.free.path.length-1].y,e,t),this.data.free.path[this.data.free.path.length-1].push({x:e,y:t}))}},{key:"deleteDraws",value:function(){this.data.free.path=[[]],this.data.left.lineX=void 0,this.data.left.point=void 0,this.data.right.lineX=void 0,this.data.right.point=void 0,this.drawState()}},{key:"drawPath",value:function(){var e=this;this.ctx.setLineDash([1,0]),this.ctx.strokeStyle="blue",this.data.free.path.forEach((function(t){var a=void 0;t.forEach((function(t){var n=t.x,i=t.y;a&&e.sketchLine(a.x,a.y,n,i),a={x:n,y:i}}))}))}},{key:"mouseOverHandler",value:function(e){var t=e.nativeEvent.offsetX,a=e.nativeEvent.offsetY;switch(this.drawState(),this.action){case 1:this.drawLine(t,!0,this.side.point);break;case 2:this.drawPoint(t,a,!0,this.side.lineX);break;case 3:this.freePaint(t,a)}}},{key:"mouseClickHandler",value:function(e){var t=e.nativeEvent.offsetX,a=e.nativeEvent.offsetY;switch(this.action){case 1:this.side.lineX=t;break;case 2:this.side.point={x:t,y:a}}1!==this.action&&2!==this.action||(this.drawState(),this.updateAngle())}},{key:"mouseDownUpHandler",value:function(e){var t=this;return function(a){var n=a.nativeEvent.offsetX,i=a.nativeEvent.offsetY;3===t.action&&(e?t.data.free.path[t.data.free.path.length-1].push({x:n,y:i}):t.data.free.path.push([]),t.data.free.down=e)}}},{key:"setAction",value:function(e){4===e?(this.deleteDraws(),this.action=0):this.action=this.action===e?0:e}},{key:"updateAngle",value:function(){if(this.side.lineX&&this.side.point){var e=this.canvasRef.height,t={x:this.side.lineX,y:e},a={x:this.side.point.x,y:this.side.point.y},n=Math.sqrt(Math.pow(t.x-a.x,2)+Math.pow(a.y,2)),i=Math.sqrt(Math.pow(t.x-a.x,2)+Math.pow(t.y-a.y,2)),o=Math.acos((Math.pow(i,2)+Math.pow(e,2)-Math.pow(n,2))/(2*i*e));this.infoRef.update(this.side===this.data.left?0:1,Math.round(180*o/Math.PI*100)/100)}}},{key:"onSideChange",value:function(e){this.side=e?this.data.right:this.data.left}},{key:"takePicture",value:function(){this.ctx.clearRect(0,0,this.rect.width+20,this.rect.height+20),this.ctx.drawImage(this.videoRef,0,0,this.rect.width,this.rect.height);var e=this.canvasRef.toDataURL("image/png");this.imgRef.setAttribute("src",e),this.imgRef.classList.remove("hidden"),this.drawState()}},{key:"cancelPicture",value:function(){this.imgRef.removeAttribute("src"),this.imgRef.classList.add("hidden")}},{key:"savePicture",value:function(){this.props.savePhoto({image:this.imgRef.src,data:{left:{point:this.data.left.point,lineX:this.data.left.lineX},right:{point:this.data.right.point,lineX:this.data.right.lineX},free:{path:this.data.free.path}},extra:this.infoRef.getState()})}},{key:"resetInfo",value:function(){this.action=0,this.data=this.getDefaultData(),this.side=this.data.left,this.drawState(),this.setImg({image:null}),this.infoRef.resetInfo(),this.downRef.reset(!1)}},{key:"render",value:function(){var e=this;return i.a.createElement(O.a,null,i.a.createElement(O.a,{item:!0,xs:11},i.a.createElement(be,{ref:function(t){return e.infoRef=t},onSideChange:this.onSideChange.bind(this),threshold:this.props.threshold})),i.a.createElement(O.a,{item:!0},i.a.createElement(O.a,{direcction:"row"},i.a.createElement(O.a,{item:!0,xs:11,id:"canvas-video-container"},i.a.createElement(ye.a,{component:"img",ref:function(t){return e.imgRef=t},className:"hidden"}),i.a.createElement(ye.a,{component:"video",ref:function(t){return e.videoRef=t}}),i.a.createElement(ye.a,{component:"canvas",ref:function(t){return e.canvasRef=t},onMouseMove:this.mouseOverHandler.bind(this),onClick:this.mouseClickHandler.bind(this),onMouseDown:this.mouseDownUpHandler(!0),onMouseUp:this.mouseDownUpHandler(!1),onMouseOut:this.drawState.bind(this)})),i.a.createElement(O.a,{item:!0,xs:1},i.a.createElement(Ne,{setAction:this.setAction}))),i.a.createElement(O.a,{container:!0,item:!0,direcction:"row",xs:11,id:"bottom-container"},i.a.createElement(ze,{takePicture:this.takePicture,cancelPicture:this.cancelPicture,savePicture:this.savePicture,patientCedula:this.props.patientCedula,ref:function(t){return e.downRef=t}}))))}}])}(i.a.Component),Ve=a(56),Xe=a(196),We=a(197);function He(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var Ke=function(e){function t(e){var a;return Object(s.a)(this,t),(a=He(this,t,[e])).state={userCedula:"",loading:!1,sessionExpired:!1,cedulaFound:!0},a.searchUser=a.searchUser.bind(a),a.onEnter=a.onEnter.bind(a),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"setMainViewState",value:function(e,t){var a=t.eid;e.eid=a,this.props.setUser(e),this.props.setFeetInfo(t.feet),this.props.obsRefReal.setObservation(t.observations),this.props.setShoeSize(parseInt(t.shoeSize)),this.searchUserImages(a)}},{key:"searchUserExam",value:function(e,t,a){var n=this;y(v+"/index.php?sid="+t+"&entryPoint=list_efp&pid="+e,(function(i){var o;if(console.log("Obtained patient exams:",i),i.rta.length>0){var r=i.rta[0];console.log("Using exam:",r),o={eid:r.id,feet:{left:{footprintType:r.tipo_huella_i,heelType:r.tipo_talon_i,footType:r.tipo_pie_i},right:{footprintType:r.tipo_huella_d,heelType:r.tipo_talon_d,footType:r.tipo_pie_d}},observations:r.observaciones,shoeSize:r.talla_plantillas},n.setMainViewState(a,o)}else{C(v+"/index.php",{entryPoint:"save_efp",sid:t,thi:"NEUTRO",thd:"NEUTRO",tpi:"NEUTRO",tpd:"NEUTRO",tti:"NEUTRO",ttd:"NEUTRO",obs:"",tp:0,pid:e},(function(e){console.log("Sucessfully created exam for patient ",a.cedula),console.log(e),o={eid:e.rta,feet:{left:{footprintType:"NEUTRO",heelType:"NEUTRO",footType:"NEUTRO"},right:{footprintType:"NEUTRO",heelType:"NEUTRO",footType:"NEUTRO"}},observations:"",shoeSize:0},n.setMainViewState(a,o)}),(function(e){"fetch"===e.type?console.log("Failed to fetch"):"session_expired"===e.type&&(console.log("Session Expired"),n.setState({sessionExpired:!0}))}))}}),(function(e){"fetch"===e.type?console.log("Failed to fetch"):"session_expired"===e.type&&(console.log("Session Expired"),n.setState({sessionExpired:!0}))}))}},{key:"getImageAndID",value:function(e){console.log("Splitting string:");var t=e.length;console.log("Raw string length: ".concat(t));var a=e.indexOf("@");console.log("Found @ char in ".concat(a));var n=e.substring(a+1,t),i=e.substring(0,a);return console.log("Split string."),[n,i]}},{key:"searchUserImages",value:function(e){var t=this;console.log("In search user images");var a=localStorage.getItem("sid");console.log("Searching for exams with examid: ".concat(e)),y(v+"/index.php?sid="+a+"&entryPoint=list_img&efp_id="+e,(function(a){console.log("Obtained images with examid ".concat(e,":")),console.log("Recieved ".concat(a.rta.length," images.")),console.log("Clearing image data");for(var n=0;n<6;n++)console.log("Clearing image ".concat(n)),t.props.setImageInMainView(n,{}),console.log("Main view cleared"),t.props.selectImageRef.setImageToDefault(n),console.log("Image ref cleared");console.log("Iterating over data:");for(var i=0;i<a.rta.length;i++){var o=a.rta[i];console.log(o);var r=t.getImageAndID(o.imagen),s=Object(Ve.a)(r,2),c=s[0],A=s[1];console.log("Image # ".concat(i," Image ID: ").concat(c," End of string ").concat(A.substring(A.length-20,A.length))),console.log("Setting image...");var l={data:{free:{path:JSON.parse(o.traza.replace(/&quot;/g,'"')),down:!1},left:{lineX:o.u_x_i||void 0,point:{x:o.x_i||void 0,y:o.y_i||void 0}},right:{lineX:o.u_x_d||void 0,point:{x:o.x_d||void 0,y:o.y_d||void 0}}},extra:{leftAngle:o.angulo_i||void 0,rightAngle:o.angulo_d||void 0},image:A};t.props.setImageInMainView(c,l),t.props.selectImageRef.updateImage(c,A),console.log("Image set succesfully")}t.setState({loading:!1}),t.props.toggleModal()}),(function(){}))}},{key:"searchUser",value:function(){var e=this;this.setState({loading:!0});var t=localStorage.getItem("sid");y(v+"/index.php?sid="+t+"&entryPoint=obtener_paciente&cedula="+this.state.userCedula,(function(a){if(null==a.rta.id)e.setState({cedulaFound:!1,loading:!1}),console.log("Cedula not found");else{console.log("Patient found: ",a);var n={name:a.rta.nombre+" "+a.rta.apellidos,cedula:e.state.userCedula,cellphone:a.rta.celular,email:a.rta.email,dob:a.rta.nacimiento,sex:a.rta.genero,pid:a.rta.id,left:{},right:{}};console.log("Getting exam id"),e.searchUserExam(n.pid,t,n)}}),(function(t){"fetch"===t.type?console.log("Failed to fetch"):"session_expired"===t.type&&(console.log("Session Expired"),e.setState({sessionExpired:!0}))}))}},{key:"logOut",value:function(){localStorage.setItem("sid",void 0),this.props.logout()}},{key:"onEnter",value:function(e){"Enter"===e.key&&this.searchUser()}},{key:"renderSearchCard",value:function(){var e=this;return i.a.createElement(_.a,null,i.a.createElement(U.a,null,i.a.createElement(d.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Search user"),i.a.createElement(O.a,{container:!0,justify:"center",alignItems:"flex-end"},i.a.createElement(O.a,{item:!0},i.a.createElement(m.a,{id:"username",label:"C\xe9dula",value:this.state.userCedula,onChange:function(t){return e.setState({userCedula:t.target.value})},autoFocus:!0,onKeyDown:this.onEnter.bind(this),type:"number"})),i.a.createElement(O.a,{item:!0},i.a.createElement(h.a,{variant:"contained",color:"primary",onClick:this.searchUser},i.a.createElement(N.a,null))),this.state.cedulaFound?i.a.createElement("br",null):i.a.createElement(O.a,{item:!0,xs:12},i.a.createElement("br",null),i.a.createElement(d.a,{component:"h2",color:"error",align:"center"},"Cedula not found")))),i.a.createElement(Xe.a,null,i.a.createElement(h.a,{size:"small",color:"secondary",onClick:this.props.toggleModal},"Cancel")))}},{key:"renderLoading",value:function(){return i.a.createElement(_.a,{className:"waitingCard"},i.a.createElement(O.a,{className:"gridWaiting",container:!0,spacing:4,direction:"column",alignItems:"center",justify:"space-around"},i.a.createElement(O.a,{item:!0,xs:12},i.a.createElement("br",null),i.a.createElement(d.a,{variant:"h5",component:"h2",align:"center"},"Searching user...")),i.a.createElement(O.a,{item:!0,xs:12},i.a.createElement(We.a,null))),i.a.createElement("br",null))}},{key:"renderLogout",value:function(){var e=this;return i.a.createElement(_.a,{className:"waitingCard"},i.a.createElement(O.a,{className:"gridWaiting",container:!0,spacing:4,direction:"column",alignItems:"center",justify:"space-around"},i.a.createElement(O.a,{item:!0,xs:12},i.a.createElement("br",null),i.a.createElement(d.a,{variant:"h5",component:"h2",align:"center"},"Your session has expired.",i.a.createElement("br",null),"Please login again.")),i.a.createElement(Xe.a,null,i.a.createElement(h.a,{size:"small",variant:"contained",color:"primary",onClick:function(){return e.logOut()}},"Log out"))),i.a.createElement("br",null))}},{key:"render",value:function(){var e;return e=this.state.sessionExpired?this.renderLogout():this.state.loading?this.renderLoading():this.renderSearchCard(),i.a.createElement("div",null,e)}}])}(n.Component);function qe(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var Ye=function(e){function t(){return Object(s.a)(this,t),qe(this,t,arguments)}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(_.a,{className:"waitingCard"},i.a.createElement(O.a,{className:"gridWaiting",container:!0,spacing:4,direction:"column",alignItems:"center",justify:"space-around"},i.a.createElement(O.a,{item:!0,xs:12},i.a.createElement("br",null),i.a.createElement(d.a,{variant:"h5",component:"h2",align:"center"},this.props.renderText)),i.a.createElement(O.a,{item:!0,xs:12},i.a.createElement(We.a,null))),i.a.createElement("br",null)))}}])}(n.Component),Ge=a(88),Ze=a(213),$e=a(198),et=a(185),tt=a(208);a(145);function at(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var nt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=at(this,t,[e])).drops={footprintType:[["SUPINADO_1","Supinado 1"],["SUPINADO_2","Supinado 2"],["SUPINADO_3","Supinado 3"],["NEUTRO","Neutro"],["PRONADO_1","Pronado 1"],["PRONADO_2","Pronado 2"],["PRONADO_3","Pronado 3"]],footType:[["PLANO_1","Plano 1"],["PLANO_2","Plano 2"],["PLANO_3","Plano 3"],["NEUTRO","Neutro"],["CAVO_1","Cavo 1"],["CAVO_2","Cavo 2"],["CAVO_3","Cavo 3"]],heelType:[["VALGO","Valgo"],["NEUTRO","Neutro"],["VARO","Varo"]]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"setFeetInfo",value:function(e,t,a){var n=Object(Ge.a)({},this.props.feetInfo);n[e][t]=a,this.props.setFeetInfo(n)}},{key:"makeDropdown",value:function(e,t,a,n){var o=this;return i.a.createElement(O.a,{item:!0,xs:3,className:"dropDown_"},i.a.createElement(et.a,{className:"dropDown"},i.a.createElement(Ze.a,null,e),i.a.createElement(tt.a,{value:this.props.feetInfo[t][a],onChange:function(e){return o.setFeetInfo(t,a,e.target.value)}},n.map((function(e,n){return i.a.createElement($e.a,{key:"".concat(a,"_").concat(t,"_").concat(n),value:e[0]},e[1])})))))}},{key:"render",value:function(){return i.a.createElement(O.a,{container:!0,spacing:2,alignItems:"center"},i.a.createElement("br",null),i.a.createElement(O.a,{container:!0,item:!0,xs:2,justifyContent:"center",alignItems:"center"},i.a.createElement(d.a,{variant:"subtitle1",className:"leftRightText"}," Left")),this.makeDropdown("Footprint type_","left","footprintType",this.drops.footprintType),this.makeDropdown("Foot type","left","footType",this.drops.footType),this.makeDropdown("Heel type","left","heelType",this.drops.heelType),i.a.createElement(O.a,{container:!0,item:!0,xs:2,justifyContent:"center",alignItems:"center"},i.a.createElement(d.a,{variant:"subtitle1",className:"leftRightText"}," Right")),this.makeDropdown("Footprint type","right","footprintType",this.drops.footprintType),this.makeDropdown("Foot type","right","footType",this.drops.footType),this.makeDropdown("Heel type","right","heelType",this.drops.heelType))}}])}(n.Component);function it(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var ot=function(e){function t(e){var a;return Object(s.a)(this,t),(a=it(this,t,[e])).state={obs:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"resetInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState({obs:e})}},{key:"setObservation",value:function(e){this.setState({obs:e})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"observationsContainer"},i.a.createElement("form",{className:"observationsForm",noValidate:!0,autoComplete:"off"},i.a.createElement(m.a,{id:"observations",label:"Observations",value:this.state.obs,onChange:function(t){return e.setState({obs:t.target.value})},margin:"normal",fullWidth:!0,multiline:!0,rows:3,variant:"filled",inputRef:this.props.obsRef})))}}])}(n.Component),rt=(a(146),a(89)),st=a.n(rt);function ct(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var At=function(e){function t(){return Object(s.a)(this,t),ct(this,t,arguments)}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(_.a,null,i.a.createElement(U.a,null,i.a.createElement(O.a,{className:"gridWaiting",container:!0,spacing:4,direction:"column",alignItems:"center",justify:"space-around"},i.a.createElement(O.a,{item:!0,xs:12},i.a.createElement("img",{src:st.a,className:"infoImage",alt:"Ppodoscope Info"})),i.a.createElement(O.a,{item:!0,xs:12},i.a.createElement(h.a,{size:"small",color:"primary",onClick:this.props.toggleModal},"OK")))))}}])}(n.Component),lt=a(205),ut=a(215),ht=a(150),gt=a(202),mt=a(204),dt=a(199),ft=a(201),pt=a(203);a(147);function Et(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var vt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Et(this,t,[e])).toggleDrawer=a.toggleDrawer.bind(a),a.state={open:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleDrawer",value:function(e){var t=this;return function(a){("keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&t.setState({open:e})}}},{key:"logOut",value:function(){localStorage.setItem("sid",void 0),this.toggleDrawer(!1),this.props.logout()}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.a,{id:"open-draw",color:"primary","aria-label":"add",className:"fab",onClick:this.toggleDrawer(!0)},i.a.createElement(dt.a,null)),i.a.createElement(ut.a,{open:this.state.open,onClose:this.toggleDrawer(!1)},i.a.createElement(h.a,{onClick:this.toggleDrawer(!1),color:"secondary",id:"draw-back"},i.a.createElement(ft.a,null)),i.a.createElement("div",{role:"presentation"},i.a.createElement("div",null,i.a.createElement(d.a,{align:"center",gutterBottom:!0,id:"threshold-title"},"Threshold"),i.a.createElement("div",{id:"menu-threshold-sett"},i.a.createElement(m.a,{required:!0,id:"outlined-required",label:"Both sides",value:this.props.threshold.value,variant:"outlined",type:"number",onChange:function(t){e.props.setThreshold(t.target.value),0===+t.target.value&&t.target.select()},onFocus:function(e){return e.target.select()}}))),i.a.createElement(ht.a,{button:!0,id:"logout-btn",onClick:function(){return e.logOut()}},i.a.createElement(gt.a,null,i.a.createElement(pt.a,null)),i.a.createElement(mt.a,{primary:"Log out"})))))}}])}(i.a.Component);function yt(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var It=function(e){function t(e){var a;return Object(s.a)(this,t),(a=yt(this,t,[e])).canvasRef=i.a.createRef(),a.imageselRef=i.a.createRef(),a.obsRef=i.a.createRef(),a.obsRefReal=i.a.createRef(),a.shoeRef=i.a.createRef(),a.dropsRef=i.a.createRef(),a.state={open:!1,openImage:!1,savingImage:!1,user:{name:"-",cedula:"-",cellphone:"-",email:"-",dob:"-",sex:"-",left:{},right:{}},feet:{left:{footprintType:"NEUTRO",heelType:"NEUTRO",footType:"NEUTRO"},right:{footprintType:"NEUTRO",heelType:"NEUTRO",footType:"NEUTRO"}},shoeSize:0,threshold:function(){var e=localStorage.getItem("threshold");if(e&&"undefined"!==e)return JSON.parse(e);var t={value:15};return localStorage.setItem("threshold",JSON.stringify(t)),t}()},a.toggleModal=a.toggleModal.bind(a),a.toogleImageModal=a.toogleImageModal.bind(a),a.savePhoto=a.savePhoto.bind(a),a.selectImage=a.selectImage.bind(a),a.setUser=a.setUser.bind(a),a.setFeetInfo=a.setFeetInfo.bind(a),a.setShoeSize=a.setShoeSize.bind(a),a.setThreshold=a.setThreshold.bind(a),a.setImageInMainView=a.setImageInMainView.bind(a),a.imageIndex=-1,a.images=[{},{},{},{},{},{}],a.observations="--",a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"setImageInMainView",value:function(e,t){this.images[e]=t}},{key:"setShoeSize",value:function(e){this.setState({shoeSize:e})}},{key:"setFeetInfo",value:function(e){this.setState({feet:e})}},{key:"toogleImageModal",value:function(){this.setState((function(e){return{openImage:!e.openImage}}))}},{key:"selectImage",value:function(e){console.log("Selecting image..."),console.log("Images in main veiw:"),console.log(this.images),this.imageIndex=e,this.canvasRef.setImg(this.images[this.imageIndex])}},{key:"toggleModal",value:function(){console.log("Toggling modal"),this.setState((function(e){return{open:!e.open}}))}},{key:"setUser",value:function(e){var t=this;this.setState({user:e,feet:{left:{footprintType:"NEUTRO",heelType:"NEUTRO",footType:"NEUTRO"},right:{footprintType:"NEUTRO",heelType:"NEUTRO",footType:"NEUTRO"}}},(function(){t.canvasRef.resetInfo(),t.obsRefReal.resetInfo("")}))}},{key:"savePhoto",value:function(e){var t=this;this.imageIndex>=0&&(this.setState({savingImage:!0}),this.images[this.imageIndex]=e,this.imageselRef.updateImage(this.imageIndex,e.image),I(Object.assign(this.state,{imgData:e,observations:this.obsRef.current,shoeSize:this.state.shoeSize,imId:this.imageIndex}),(function(){}),(function(){}),(function(){t.setState({savingImage:!1})}),(function(){console.log("COULD NOT SAVE IMAGE"),t.setState({savingImage:!1})})))}},{key:"setThreshold",value:function(e){var t=this;this.setState((function(t){return t.threshold.value=+e,t}),(function(){return localStorage.setItem("threshold",JSON.stringify(t.state.threshold))}))}},{key:"render",value:function(){var e=this;return(i.a.createElement("div",{className:"mainViewDiv"},i.a.createElement("div",{className:"logo-container"},i.a.createElement("img",{src:P.a,alt:"Logo",className:"logo_"})),i.a.createElement(vt,{logout:this.props.logout,threshold:this.state.threshold,setThreshold:this.setThreshold}),i.a.createElement(O.a,{item:!0,xs:12},i.a.createElement("div",{className:"user-data-container horizontal"},i.a.createElement(he,{user:this.state.user,setShoeSize:this.setShoeSize,shoeSize:this.state.shoeSize}))),i.a.createElement(O.a,{container:!0,spacing:0,justify:"space-around"},i.a.createElement(O.a,{item:!0,xs:4},i.a.createElement(O.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center"},i.a.createElement("br",null),i.a.createElement(O.a,{item:!0,xs:12},i.a.createElement(ve,{selectImage:this.selectImage,ref:function(t){return e.imageselRef=t}})),i.a.createElement("br",null),i.a.createElement(O.a,{item:!0,xs:12},i.a.createElement(nt,{feetInfo:this.state.feet,setFeetInfo:this.setFeetInfo,ref:function(t){return e.dropsRef=t}})))),i.a.createElement(O.a,{item:!0,xs:5},i.a.createElement(Le,{threshold:this.state.threshold,savePhoto:this.savePhoto,ref:function(t){return e.canvasRef=t},patientCedula:this.state.user.cedula}),i.a.createElement(ot,{obsRef:this.obsRef,ref:function(t){return e.obsRefReal=t}}))),i.a.createElement(w.a,{color:"primary","aria-label":"add",className:"fab",onClick:function(){return e.setState({open:!0})}},i.a.createElement(N.a,null)),i.a.createElement(S.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:"modal",open:this.state.open,onClose:function(){return e.setState({open:!0})},closeAfterTransition:!0,disableEnforceFocus:!0,disableAutoFocus:!0,BackdropComponent:x.a,BackdropProps:{timeout:200}},i.a.createElement(lt.a,null,i.a.createElement(R.a,{in:this.state.open,className:"modalContent"},i.a.createElement(Ke,{toggleModal:this.toggleModal,setUser:this.setUser,setFeetInfo:this.setFeetInfo,obsRefReal:this.obsRefReal,setShoeSize:this.setShoeSize,selectImageRef:this.imageselRef,setImageInMainView:this.setImageInMainView,logout:this.props.logout})))),i.a.createElement(S.a,{className:"modal",open:this.state.savingImage,onClose:function(){return e.setState({savingImage:!0})},closeAfterTransition:!0,disableEnforceFocus:!0,disableAutoFocus:!0,BackdropComponent:x.a,BackdropProps:{timeout:200}},i.a.createElement(lt.a,null,i.a.createElement(R.a,{in:this.state.savingImage,className:"modalContent"},i.a.createElement(Ye,{renderText:"Saving image..."})))),i.a.createElement(w.a,{color:"primary","aria-label":"info",className:"fabImage",onClick:function(){return e.setState({openImage:!0})}},i.a.createElement(D.a,null)),i.a.createElement(S.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:"imageModal",open:this.state.openImage,onClose:function(){return e.setState({openImage:!1})},closeAfterTransition:!0,disableEnforceFocus:!0,disableAutoFocus:!0,BackdropComponent:x.a,BackdropProps:{timeout:200}},i.a.createElement(lt.a,null,i.a.createElement(R.a,{in:this.state.openImage,className:"imageModalContent"},i.a.createElement(At,{toggleModal:this.toogleImageModal}))))))}}])}(n.Component);function Ct(e,t,a){return t=Object(l.a)(t),Object(A.a)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,a||[],Object(l.a)(e).constructor):t.apply(e,a))}var bt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Ct(this,t,[e])).state={authenticated:!1},a.setAuthenticated=a.setAuthenticated.bind(a),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"setAuthenticated",value:function(e){this.setState({authenticated:e},(function(){console.log(e?"authenticated!":"logout!")}))}},{key:"render",value:function(){var e=this;return i.a.createElement(f.a,{width:"100%",className:"appContainer"},i.a.createElement(O.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},this.state.authenticated?i.a.createElement(It,{logout:function(){return e.setAuthenticated(!1)}}):i.a.createElement(Q,{authTrue:this.setAuthenticated})))}}])}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(bt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},64:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAJSUlEQVR4nO3cwWpTaRyH4f+EoiKuZBARFy68C29n7mIW5mKHwYWLIq6kFDf5UApDZdDzYd/ngZKUJqc/ziYvySEzAEDOH9//cj6fTzPzcmaeXH5eXP50mplXM3N15/nr8Y//4/inyzEe3bPj6nKcu8f/Px7NzJ8/8D9/tafz7fzB8s/M3Owe8Ru6mZkP49z9TJ9n5nqc059pndPb3UPucz6f319d7vw1M3/PzJuti+Dhe717wG/s7e4B8IC8P13uvBsv/gCQcbr/IQDAQyMAACBIAABAkAAAgCABAABBAgAAglYAPN26AgA41AoA31gHACE+AgCAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCVgBcbV0BABxqBcDLrSsAgEN5BwAAglwDAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBKwCebV0BABxqBcDzrSsAgEOd7twCAAFe+AEgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABC0AuB66woA4FArAD5tXQEAHGoFwO3WFQDAoVwDAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAglYAfNm6AgA41AqAf7euAAAO5SMAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQtALgdusKAOBQKwCut64AAA61AuDT1hUAwKFcAwAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIJWAHzZugIAONQKgI9bVwAAh1oBcLN1BQBwKNcAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAAACg4CuQVCF5dI3chQAAAABJRU5ErkJggg=="},76:function(e,t,a){e.exports=a.p+"static/media/logo_piesalud.b4e22e13.png"},78:function(e,t,a){e.exports=a.p+"static/media/Logopodoline_.a2bc18b7.png"},89:function(e,t,a){e.exports=a.p+"static/media/plantilla-podoscopio.db191954.jpg"}},[[106,1,2]]]);
//# sourceMappingURL=main.72d3011c.chunk.js.map